/* =========================================================
   styles.css (CLEAN FINAL)
   - Keeps your current design (themes, gradients, card look)
   - Removes duplicated “final/hotfix” blocks
   - Consistent buttons/inputs + no overlaps in pool/results/members
   ========================================================= */


/* =========================================================
   Background + global polish
   ========================================================= */


/* Peppy background + subtle grain */
body {
    background: radial-gradient(900px 500px at 15% -10%,
            rgba(255, 0, 170, 0.28),
            transparent 55%),
        radial-gradient(800px 520px at 90% 0%,
            rgba(0, 255, 230, 0.22),
            transparent 55%),
        radial-gradient(900px 520px at 60% 110%,
            rgba(120, 90, 255, 0.24),
            transparent 55%),
        hsl(var(--b2));
}

/* ✅ Prevent “cut off” by blocking accidental horizontal overflow */
html,
body {
    max-width: 100%;
    overflow-x: hidden;
}

body::before {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    opacity: 0.08;
    mix-blend-mode: overlay;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
}


/* Better scrollbar (Chrome/Edge) */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-thumb {
    background: color-mix(in oklab, hsl(var(--p)) 42%, transparent);
    border-radius: 999px;
}

::-webkit-scrollbar-track {
    background: transparent;
}


/* Accessibility: reduce motion */
@media (prefers-reduced-motion: reduce) {
    * {
        animation: none !important;
        transition: none !important;
        scroll-behavior: auto !important;
    }
}


/* =========================================================
     Theme variables (daisyUI overrides)
     ========================================================= */


/* Synthwave (default) – deep neon night */
html[data-theme="synthwave"] {
    /* surfaces */
    --b1: 240 29% 16%;
    /* card bg */
    --b2: 248 38% 10%;
    /* page bg */
    --b3: 248 40% 8%;
    /* borders */

    /* accents */
    --p: 315 93% 63%;
    /* primary */
    --s: 184 100% 60%;
    /* secondary */
    --a: 52 100% 63%;
    /* accent */

    /* content */
    --bc: 210 32% 92%;

    /* feedback */
    --su: 145 72% 55%;
    --er: 0 83% 64%;
}


/* Cupcake (light) – pastel cyberpunk */
html[data-theme="cupcake"] {
    --b1: 220 40% 99%;
    --b2: 220 45% 96%;
    --b3: 220 30% 92%;

    --p: 283 84% 62%;
    --s: 192 94% 62%;
    --a: 46 98% 64%;

    --bc: 222 18% 18%;
    --su: 145 64% 40%;
    --er: 0 76% 55%;
}


/* Ensure readable text in both themes */
html[data-theme="synthwave"] body,
html[data-theme="synthwave"] .card,
html[data-theme="synthwave"] .navbar {
    color: hsl(var(--bc));
}

html[data-theme="cupcake"] body,
html[data-theme="cupcake"] .card,
html[data-theme="cupcake"] .navbar {
    color: hsl(var(--bc));
}


/* =========================================================
     Small UI animations/icons
     ========================================================= */


/* Theme icon animation */
.theme-ico {
    transition: transform 260ms ease, color 260ms ease, stroke 260ms ease;
}


/* Dark synthwave: neon magenta camera with slight tilt */
html[data-theme="synthwave"] .theme-ico {
    color: hsl(315 93% 63%);
    stroke: currentColor;
    transform: rotate(-8deg) scale(1);
}


/* Light cupcake: teal camera, opposite tilt */
html[data-theme="cupcake"] .theme-ico {
    color: hsl(192 94% 62%);
    stroke: currentColor;
    transform: rotate(8deg) scale(1.05);
}


/* Press feedback */
button:active .theme-ico,
.btn:active .theme-ico {
    transform: scale(0.94) translateY(1px);
}


/* A tiny “pop” for Tonight’s pick badge */
@keyframes pop {
    0% {
        transform: scale(0.96);
        opacity: 0.7;
    }

    100% {
        transform: scale(1);
        opacity: 1;
    }
}

.badge-primary {
    animation: pop 220ms ease-out;
}


/* =========================================================
     Core components (cards, header, modals)
     ========================================================= */


/* Cards */
.card {
    background-color: hsl(var(--b1));
    border-radius: 0.9rem;
    border: 1px solid hsl(var(--b3));
    box-shadow: 0 18px 45px rgba(0, 0, 0, 0.48),
        0 0 0 1px rgba(255, 255, 255, 0.02);
    overflow: hidden;
    transition: transform 160ms ease, box-shadow 160ms ease;
}


/* Make posters feel snappy on hover */
.card img {
    transition: transform 160ms ease, filter 160ms ease;
}

.card:hover img {
    transform: translateY(-2px) scale(1.02);
    filter: saturate(1.1) contrast(1.05);
}


/* Card hover: gentle lift */
.card:hover {
    transform: translateY(-2px);
    box-shadow: 0 22px 55px rgba(0, 0, 0, 0.6),
        0 0 0 1px rgba(255, 255, 255, 0.04);
}


/* Card poster area */
.card figure {
    padding: 0.75rem 0.75rem 0;
}

.card img {
    border-radius: 0.7rem;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
}


/* Card body spacing / typography */
.card-body {
    padding: 0.75rem 0.9rem 0.9rem;
    gap: 0.4rem;
}

.card-title {
    font-size: 0.96rem;
    letter-spacing: 0.01em;
}


/* Rating badge more “pro” */
.badge-primary {
    border-radius: 999px;
    padding-inline: 0.55rem;
    font-weight: 600;
}


/* Header shell that follows theme */
.header-shell {
    background-color: hsl(var(--b1));
    border-color: hsl(var(--b3));
    box-shadow: 0 14px 30px rgba(0, 0, 0, 0.45),
        0 0 0 1px rgba(255, 255, 255, 0.02);
}

.header-shell,
.header-shell span {
    color: hsl(var(--bc));
}


/* Make buttons not shrink too small in header */
.header-shell .btn {
    min-width: 2.25rem;
}


/* Modals: ensure auth dialog text and fields are visible */
html[data-theme="synthwave"] .modal-box,
html[data-theme="cupcake"] .modal-box {
    background-color: hsl(var(--b1));
    color: hsl(var(--bc));
}

.modal-box .label-text,
.modal-box p,
.modal-box h3 {
    color: hsl(var(--bc));
}

.modal-box .input,
.modal-box .btn,
.modal-box .divider {
    color: hsl(var(--bc));
}


/* =========================================================
     Layout: results grid
     ========================================================= */


#results {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 1.5rem;
}


/* On small screens: little extra padding consistency */
@media (max-width: 768px) {
    .card-body {
        padding-inline: 0.9rem;
    }
}


/* =========================================================
     Unified controls (buttons + inputs)
     ========================================================= */


:root {
    --ui-radius: 0.7rem;
    --ui-radius-sm: 0.65rem;
    --ui-radius-xs: 0.6rem;
    --ui-radius-pill: 999px;

    --ui-border: 1px solid hsl(var(--b3));

    --ui-shadow: 0 10px 24px rgba(0, 0, 0, 0.45),
        0 0 0 1px rgba(255, 255, 255, 0.05);
    --ui-shadow-soft: 0 6px 16px rgba(0, 0, 0, 0.35),
        0 0 0 1px rgba(255, 255, 255, 0.03);
}

* {
    -webkit-tap-highlight-color: transparent;
}

.truncate {
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}


/* Fallback if color-mix isn't supported */
.bg-base-20040 {
    background-color: rgba(255, 255, 255, 0.06);
}

@supports (background-color: color-mix(in oklab, black, white)) {
    .bg-base-20040 {
        background-color: color-mix(in oklab, hsl(var(--b2)) 40%, transparent);
    }
}


/* Base control sizing */
.btn,
.input,
.select {
    min-height: 2.4rem;
    height: 2.4rem;
    border-radius: var(--ui-radius);
    font-size: 0.9rem;
    padding-inline: 0.85rem;
}


/* Small variants */
.btn-sm,
.input-sm,
.select-sm {
    min-height: 2.1rem;
    height: 2.1rem;
    font-size: 0.82rem;
    border-radius: var(--ui-radius-sm);
}


/* XS variants */
.btn-xs,
.input-xs,
.select-xs {
    min-height: 1.8rem;
    height: 1.8rem;
    font-size: 0.78rem;
    border-radius: var(--ui-radius-xs);
}


/* Buttons: shared behavior */
.btn {
    line-height: 1;
    border-width: 1px;
    border-color: transparent;
    transition: transform 120ms ease, filter 160ms ease, box-shadow 160ms ease,
        background-color 160ms ease, border-color 160ms ease;
}

.btn:active {
    transform: translateY(1px);
}

.btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px color-mix(in oklab, hsl(var(--p)) 45%, transparent),
        var(--ui-shadow);
}


/* Primary / secondary gradients (base look) */
.btn-primary {
    background: linear-gradient(135deg,
            hsl(var(--p)),
            color-mix(in oklab, hsl(var(--p)) 80%, hsl(var(--s)) 20%));
    border-color: transparent;
    color: hsl(0 0% 5%);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5),
        0 0 0 1px rgba(255, 255, 255, 0.05);
}

.btn-primary:hover {
    filter: brightness(1.05);
}

.btn-secondary {
    background: linear-gradient(135deg,
            hsl(var(--s)),
            color-mix(in oklab, hsl(var(--s)) 75%, hsl(var(--p)) 25%));
    border-color: transparent;
    color: hsl(0 0% 5%);
    box-shadow: var(--ui-shadow);
}

.btn-secondary:hover {
    filter: brightness(1.06);
}


/* Ensure Add button is visible on dark synthwave */
html[data-theme="synthwave"] .btn-secondary {
    background-color: hsl(var(--s));
    color: hsl(0 0% 5%);
    border-color: transparent;
}

html[data-theme="synthwave"] .btn-secondary:hover {
    filter: brightness(1.1);
}


/* Ghost buttons (header/login, details) */
.btn-ghost {
    border-radius: var(--ui-radius-pill);
    border-color: transparent;
    background-color: transparent;
    box-shadow: none;
}

.btn-ghost:hover {
    background-color: color-mix(in oklab, hsl(var(--b3)) 60%, transparent);
}


/* Outline buttons (for safety) */
.btn-outline {
    background-color: transparent;
    border: var(--ui-border);
    color: hsl(var(--bc));
}

.btn-outline:hover {
    background-color: color-mix(in oklab, hsl(var(--b2)) 35%, transparent);
}


/* Danger button: consistent shadow */
.btn-error {
    box-shadow: var(--ui-shadow-soft);
}


/* Disabled states */
.btn[disabled],
.btn.btn-disabled,
.btn:disabled {
    opacity: 0.55;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
    filter: none;
}


/* Inputs/selects: consistent look */
.input,
.select {
    border-width: 1px;
    border-color: hsl(var(--b3));
    background-color: hsl(var(--b1));
    box-shadow: var(--ui-shadow-soft);
    color: hsl(var(--bc));
}

.input:focus,
.select:focus {
    outline: none;
    border-color: hsl(var(--p));
    box-shadow: 0 0 0 1px hsl(var(--p)), 0 10px 24px rgba(0, 0, 0, 0.55);
}

.input:disabled,
.select:disabled {
    opacity: 0.65;
    cursor: not-allowed;
}


/* Select option readability */
select option {
    color: hsl(var(--bc));
    background-color: hsl(var(--b1));
}


/* Result sort dropdown text contrast */
#resultSort.select {
    color: hsl(var(--bc));
}

#resultSort.select option {
    color: hsl(var(--bc));
    background-color: hsl(var(--b1));
}


/* Theme toggle (if used) */
.theme-toggle__dark-inner {
    transition: transform 260ms ease, color 260ms ease;
}

html[data-theme="synthwave"] .theme-toggle__dark-inner {
    color: hsl(315 93% 63%);
    transform: rotate(-10deg);
}

html[data-theme="cupcake"] .theme-toggle__dark-inner {
    color: hsl(192 94% 62%);
    transform: rotate(10deg);
}

.theme-toggle:active .theme-toggle__dark-inner {
    transform: scale(0.92) translateY(1px);
}


/* Theme button harmonization (as in your file) */
html[data-theme="synthwave"] .btn-primary,
html[data-theme="synthwave"] .btn-secondary,
html[data-theme="synthwave"] .btn-accent {
    background: linear-gradient(135deg,
            hsl(var(--p)),
            color-mix(in oklab, hsl(var(--p)) 80%, hsl(var(--s)) 20%));
    border-color: transparent;
    color: hsl(0 0% 5%);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5),
        0 0 0 1px rgba(255, 255, 255, 0.06);
}

html[data-theme="synthwave"] .btn-primary:hover,
html[data-theme="synthwave"] .btn-secondary:hover,
html[data-theme="synthwave"] .btn-accent:hover {
    filter: brightness(1.06);
}

html[data-theme="cupcake"] .btn-primary,
html[data-theme="cupcake"] .btn-secondary,
html[data-theme="cupcake"] .btn-accent {
    background: linear-gradient(135deg,
            hsl(var(--s)),
            color-mix(in oklab, hsl(var(--s)) 80%, hsl(var(--p)) 20%));
    border-color: transparent;
    color: hsl(0 0% 5%);
    box-shadow: 0 10px 22px rgba(15, 23, 42, 0.3),
        0 0 0 1px rgba(15, 23, 42, 0.06);
}

html[data-theme="cupcake"] .btn-primary:hover,
html[data-theme="cupcake"] .btn-secondary:hover,
html[data-theme="cupcake"] .btn-accent:hover {
    filter: brightness(1.04);
}


/* Typography helper in your file */
.card-body p,
.text-base-content\/60 {
    font-weight: 400;
}


/* =========================================================
     App.js fallback utilities (in case CDN Tailwind misses them)
     ========================================================= */


.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.aspect-23 {
    aspect-ratio: 2 / 3;
}

.text-base-content60 {
    color: color-mix(in oklab, hsl(var(--bc)) 60%, transparent);
}

.text-base-content70 {
    color: color-mix(in oklab, hsl(var(--bc)) 70%, transparent);
}


/* Toast wrapper created by app.js uses z-999 */
.z-999 {
    z-index: 999;
}

#toasts.toast {
    z-index: 9999;
}


/* =========================================================
     Mobile layout safety (header + modals + pager)
     ========================================================= */


@media (max-width: 640px) {
    header.header-shell {
        flex-wrap: wrap;
        row-gap: 0.5rem;
    }

    /* second header row becomes full width and wraps */
    header.header-shell>div:last-child {
        width: 100%;
        flex-wrap: wrap;
        justify-content: flex-start;
    }

    /* make “Pick for me” easy to tap */
    #btnPick {
        width: 100%;
    }
}

/* Pager can wrap on small screens */
#pagerWrap {
    flex-wrap: wrap;
}

/* Room pick banner: match your “card-ish” look */
#roomPickBanner {
    border: 1px solid hsl(var(--b3));
    border-radius: 0.9rem;
}

/* Modals: usable on very small screens */
@media (max-width: 480px) {
    .modal-box {
        max-height: calc(100vh - 2rem);
        overflow: auto;
        padding: 1rem;
    }

    .modal-action {
        flex-wrap: wrap;
        gap: 0.5rem;
    }

    .modal-action .btn {
        flex: 1 1 9rem;
    }
}


/* =========================================================
     Results card actions: never overlap
     ========================================================= */


#results .card .card-body {
    display: flex !important;
    flex-direction: column !important;
}

/* If app.js uses a flex row for title+badge, allow wrap */
#results .card .card-body>.flex.items-start {
    flex-wrap: wrap;
}

#results .card .card-actions {
    margin-top: auto !important;
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 0.5rem !important;
    justify-content: flex-end !important;
    align-items: center !important;
}

#results .card .card-actions .btn {
    white-space: nowrap;
}

@media (max-width: 420px) {
    #results .card .card-actions {
        flex-direction: column !important;
        align-items: stretch !important;
    }

    #results .card .card-actions .btn {
        width: 100%;
    }
}


/* =========================================================
     Pool list + rows (grid so buttons never collide)
     ========================================================= */


/* Cleaner chips */
#pool .badge {
    border-radius: 999px;
}

/* Each pool row is created by app.js as a direct child of #pool */
#pool>div {
    display: grid !important;
    grid-template-columns: 3rem minmax(0, 1fr) auto !important;
    align-items: center !important;
    gap: 0.75rem !important;

    padding: 0.65rem 0.75rem;
    border-radius: 0.7rem;
    background-color: color-mix(in oklab, hsl(var(--b2)) 40%, transparent);
    border: 1px solid hsl(var(--b3));
    backdrop-filter: blur(6px);
    transition: background-color 160ms ease;
}

#pool>div:hover {
    background-color: color-mix(in oklab, hsl(var(--b2)) 55%, transparent);
}

/* Thumb slot: either <img> or placeholder div */
#pool>div> :first-child {
    width: 3rem !important;
    height: 4rem !important;
    border-radius: 0.6rem !important;
    overflow: hidden !important;
}

/* Info column */
#pool>div> :nth-child(2) {
    min-width: 0 !important;
}

/* Ensure long titles truncate instead of pushing buttons */
#pool .font-semibold {
    font-size: 0.9rem;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Actions column */
#pool>div> :nth-child(3) {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 0.45rem !important;
    justify-content: flex-end !important;
    align-items: center !important;
}

@media (max-width: 640px) {
    #pool>div {
        grid-template-columns: 3rem minmax(0, 1fr) !important;
        grid-template-rows: auto auto !important;
    }

    #pool>div> :nth-child(3) {
        grid-column: 1 / -1 !important;
        justify-content: flex-start !important;
    }

    #pool .btn-xs {
        flex: 1 1 auto;
        min-width: 5.25rem;
    }
}

/* Keep pool usable when long */
#pool {
    max-height: 32rem;
    overflow-y: auto;
}

@media (max-width: 768px) {
    #pool {
        max-height: 24rem;
    }
}


/* =========================================================
     Room members panel (nested card) – no clipping + clean rows
     ========================================================= */


/* Allow nested card to show badge cleanly (global .card has overflow:hidden) */
#roomMembersWrap.card {
    overflow: visible !important;
}

#roomMembersWrap {
    width: 100% !important;
    display: block !important;
    margin-top: 0.75rem !important;

    /* Remove double heavy shadow (it sits inside another card) */
    box-shadow: none !important;
    border: 1px solid hsl(var(--b3)) !important;
    background: color-mix(in oklab, hsl(var(--b1)) 70%, transparent) !important;
    border-radius: 0.9rem;
}

#roomMembersWrap .card-body {
    padding: 0.9rem !important;
    overflow: visible !important;
}

/* Header row: “Room members” + Online badge */
#roomMembersWrap .card-body>div:first-child {
    display: grid !important;
    grid-template-columns: minmax(0, 1fr) auto !important;
    align-items: center !important;
    gap: 0.75rem !important;
    overflow: visible !important;
}

#roomMembersWrap .card-body>div:first-child h3 {
    min-width: 0 !important;
    margin: 0 !important;
}

/* Online count badge spacing */
#roomOnlineCount {
    white-space: nowrap !important;
    flex-shrink: 0 !important;
    margin-right: 0.35rem !important;
    border-radius: 999px;
    font-size: 0.75rem;
    padding: 0.25rem 0.6rem;
}

@media (max-width: 420px) {
    #roomOnlineCount {
        font-size: 0.7rem !important;
        padding: 0.2rem 0.45rem !important;
        margin-right: 0.25rem !important;
    }
}

/* Members list */
#roomMembersList {
    display: flex !important;
    flex-direction: column !important;
    gap: 0.5rem !important;
    margin-top: 0.5rem !important;
    max-height: 12rem;
    overflow: auto;
}

@media (min-width: 1024px) {
    #roomMembersList {
        max-height: 14rem;
    }
}

/* Each row (app.js uses bg-base-20040 etc.) */
#roomMembersList>div {
    width: 100% !important;
    display: grid !important;
    grid-template-columns: minmax(0, 1fr) auto !important;
    align-items: center !important;
    column-gap: 0.6rem !important;

    padding: 0.6rem 0.75rem !important;
    border-radius: 0.75rem !important;
    border: 1px solid hsl(var(--b3)) !important;
    word-break: break-word;
}

#roomMembersList>div>.truncate {
    min-width: 0 !important;
}

#roomMembersList>div>.badge {
    justify-self: end !important;
    white-space: nowrap !important;
}

/* Keep members list usable on mobile */
@media (max-width: 768px) {
    #roomMembersList {
        max-height: 12rem;
    }
}

/* Prevent long room IDs from breaking header layout */
#roomBadge {
    max-width: 12rem;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: 0.8rem;
}

@media (max-width: 640px) {
    #roomBadge {
        max-width: 8rem;
    }
}


/* =========================================================
     Watch filters UI (Step 1)
     ========================================================= */


#watchFilters {
    padding: 0.75rem;
    border-radius: 0.9rem;
    border: 1px solid hsl(var(--b3));
    background-color: color-mix(in oklab, hsl(var(--b2)) 30%, transparent);
}

.watch-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.35rem 0.6rem;
    border-radius: 999px;
    border: 1px solid hsl(var(--b3));
    background-color: color-mix(in oklab, hsl(var(--b1)) 70%, transparent);
    cursor: pointer;
    user-select: none;
}

.watch-chip:hover {
    filter: brightness(1.04);
}

#watchRegion {
    width: 100%;
}

@media (min-width: 1024px) {
    #watchRegion {
        height: 2.9rem !important;
        border-radius: 0.95rem !important;
    }
}

.wp-pill span.opacity-70 {
    margin-left: 0.25rem;
}


/* =========================================================
     ✅ Laptop safety: allow md:flex-row toolbars to wrap
     (prevents overflow on 1366×768 when widths are fixed)
     ========================================================= */
@media (min-width: 768px) and (max-width: 1535px) {
    .md\:flex-row {
        flex-wrap: wrap !important;
    }
}


/* =========================================================
     Desktop layout expansion (PC) — keep mobile unchanged
     ========================================================= */

/* ✅ CHANGED: was 1024px; moved to 1536px so 1366×768 doesn’t get “big monitor” layout */
@media (min-width: 1536px) {

    /* Remove boxed feel and use more viewport width */
    .max-w-5xl {
        max-width: 100% !important;
        width: 100% !important;
        padding-left: 1.75rem !important;
        padding-right: 1.75rem !important;
    }

    /* Wider 2-column layout */
    main.grid {
        grid-template-columns: minmax(0, 3fr) minmax(360px, 1fr) !important;
        gap: 1.5rem !important;
        align-items: start !important;
    }

    /* More cards per row */
    #results {
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)) !important;
        gap: 1.75rem !important;
    }

    /* Sticky right panel */
    main.grid>section:last-child {
        position: sticky;
        top: 1.25rem;
    }
}

/* Keep your existing ultra-wide tuning */
@media (min-width: 1536px) {
    .max-w-5xl {
        padding-left: 2.25rem !important;
        padding-right: 2.25rem !important;
    }

    main.grid {
        grid-template-columns: minmax(0, 3.4fr) minmax(420px, 1fr) !important;
        gap: 1.75rem !important;
    }

    #results {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)) !important;
    }
}


/* 2) Make the search bar less wide (your input is #q with w-full) */
#q {
    max-width: 420px;
    width: 100%;
}

/* Optional: slightly smaller on very large screens */
@media (min-width: 1280px) {
    #q {
        max-width: 380px;
    }
}

/* 3) Result sort: prevent arrow overlapping text (your select is #resultSort) */
#resultSort {
    padding-right: 2.5rem !important;
    /* space for arrow */
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;

    /* make the arrow sit in the right padding area */
    background-position: right 0.85rem center !important;
    background-size: 1rem 1rem !important;
}

/* Also ensure the select keeps a usable width */
#resultSort {
    min-width: 10.5rem;
}


/* 4) Exclude watched: make it visually obvious when ON (checkbox id = excludeWatched) */
label:has(#excludeWatched) {
    padding: 0.45rem 0.6rem;
    border-radius: 999px;
    border: 1px solid hsl(var(--b3));
    background-color: color-mix(in oklab, hsl(var(--b2)) 35%, transparent);
    transition: filter 160ms ease, background-color 160ms ease,
        border-color 160ms ease, box-shadow 160ms ease;
}

label:has(#excludeWatched):hover {
    filter: brightness(1.05);
}

label:has(#excludeWatched:checked) {
    border-color: color-mix(in oklab, hsl(var(--p)) 55%, hsl(var(--b3)) 45%);
    background: linear-gradient(135deg,
            color-mix(in oklab, hsl(var(--p)) 70%, transparent),
            color-mix(in oklab, hsl(var(--s)) 55%, transparent));
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.45),
        0 0 0 1px rgba(255, 255, 255, 0.06);
}

/* Make the text pop when enabled */
label:has(#excludeWatched:checked) span {
    color: hsl(var(--bc));
    font-weight: 700;
}

/* Make the checkbox itself match the "enabled" state better */
#excludeWatched.checkbox:checked {
    background-color: hsl(var(--p));
    border-color: transparent;
}


/* ---------- 2) Exclude watched + OTT accounts: same pill UI + theme-aware ON state ---------- */
/* Your Exclude watched is a checkbox (#excludeWatched) inside a label in index.html. */
label:has(#excludeWatched),
/* OTT accounts / providers toggles: make ANY checkbox/radio inside #watchFilters look like pills */
#watchFilters label:has(input[type="checkbox"]),
#watchFilters label:has(input[type="radio"]),
/* If OTT toggles are buttons/chips, style them too */
#watchFilters .watch-chip {
    padding: 0.45rem 0.65rem;
    border-radius: 999px;
    border: 1px solid hsl(var(--b3));
    background-color: color-mix(in oklab, hsl(var(--b2)) 35%, transparent);
    transition: filter 160ms ease, background-color 160ms ease,
        border-color 160ms ease, box-shadow 160ms ease, transform 120ms ease;
}

label:has(#excludeWatched):hover,
#watchFilters label:has(input[type="checkbox"]):hover,
#watchFilters label:has(input[type="radio"]):hover,
#watchFilters .watch-chip:hover {
    filter: brightness(1.05);
}

label:has(#excludeWatched:checked),
#watchFilters label:has(input[type="checkbox"]:checked),
#watchFilters label:has(input[type="radio"]:checked),
/* If your OTT chips are implemented as buttons, these cover common “active” patterns */
#watchFilters .watch-chip.is-active,
#watchFilters .watch-chip.active,
#watchFilters .watch-chip[aria-pressed="true"],
#watchFilters .watch-chip[data-active="true"] {
    border-color: color-mix(in oklab, hsl(var(--p)) 55%, hsl(var(--b3)) 45%);
    background: linear-gradient(135deg,
            color-mix(in oklab, hsl(var(--p)) 70%, transparent),
            color-mix(in oklab, hsl(var(--s)) 55%, transparent));
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.45),
        0 0 0 1px rgba(255, 255, 255, 0.06);
}

label:has(#excludeWatched:checked) span,
#watchFilters label:has(input[type="checkbox"]:checked) span,
#watchFilters label:has(input[type="radio"]:checked) span,
#watchFilters .watch-chip.is-active,
#watchFilters .watch-chip.active,
#watchFilters .watch-chip[aria-pressed="true"],
#watchFilters .watch-chip[data-active="true"] {
    font-weight: 700;
    color: hsl(var(--bc));
}

/* Keep the actual checkbox visible and theme-consistent when checked */
#excludeWatched.checkbox:checked,
#watchFilters input[type="checkbox"].checkbox:checked,
#watchFilters input[type="radio"].radio:checked {
    background-color: hsl(var(--p));
    border-color: transparent;
}

/* Optional: make the pill feel clickable */
#watchFilters label:has(input[type="checkbox"]),
#watchFilters label:has(input[type="radio"]) {
    cursor: pointer;
    user-select: none;
}


/* =========================================================
  FINAL GENRE DROPDOWN STYLE (multi-select)
  ========================================================= */


/* Exact element:
  <select id="genreFilter" class="select select-bordered select-sm" multiple size="5"></select>
*/
#genreFilter {
    /* Override any generic .select / .select-sm / .select-bordered */
    border-radius: 0.75rem !important;
    border-width: 1px !important;
    border-style: solid !important;
    border-color: hsl(var(--b3)) !important;

    background-color: hsl(var(--b1)) !important;
    color: hsl(var(--bc)) !important;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35),
        0 0 0 1px rgba(255, 255, 255, 0.03) !important;

    /* Multi-select should look like a scrollable list, not a single-select */
    padding: 0.5rem 0.6rem !important;
    min-height: 11rem !important;
    /* matches size="5" */

    /* Remove the dropdown chevron that .select normally adds */
    background-image: none !important;
    background-position: initial !important;
    background-repeat: initial !important;
}

/* Options inside genres list */
#genreFilter option {
    color: hsl(var(--bc)) !important;
    background-color: hsl(var(--b1)) !important;
}

/* Make genreFilter behave like other selects on focus */
#genreFilter:focus {
    outline: none;
    border-color: hsl(var(--p));
    box-shadow: 0 0 0 1px hsl(var(--p)), 0 10px 24px rgba(0, 0, 0, 0.55);
}


/* Bigger + standout search input */
#q {
    max-width: 520px;
    min-height: 3rem;
    height: 3rem;
    font-size: 1rem;
    border-width: 2px;
    border-color: color-mix(in oklab, hsl(var(--p)) 55%, hsl(var(--b3)) 45%);
    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.45),
        0 0 0 1px rgba(255, 255, 255, 0.06);
}

#q:focus {
    border-color: hsl(var(--p));
    box-shadow: 0 0 0 2px color-mix(in oklab, hsl(var(--p)) 55%, transparent),
        0 14px 34px rgba(0, 0, 0, 0.55);
}

/* Prevent select arrow overlapping text (mediaType) */
#mediaType {
    padding-right: 2.5rem !important;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
    background-position: right 0.85rem center !important;
    background-size: 1rem 1rem !important;
}

/* Genres dropdown (button + menu) should match other selects */
#genreDropdownBtn {
    border: 1px solid hsl(var(--b3)) !important;
    background-color: hsl(var(--b1)) !important;
    color: hsl(var(--bc)) !important;
    box-shadow: var(--ui-shadow-soft) !important;
}

#genreDropdownBtn:hover {
    background-color: color-mix(in oklab,
            hsl(var(--b2)) 35%,
            transparent) !important;
}

#genreDropdownBtn:focus-visible {
    outline: none !important;
    box-shadow: 0 0 0 1px hsl(var(--p)), 0 10px 24px rgba(0, 0, 0, 0.55) !important;
}

/* Menu surface matches your select dropdown surface */
#genreDropdownMenu {
    border-color: hsl(var(--b3)) !important;
    background-color: hsl(var(--b1)) !important;
    color: hsl(var(--bc)) !important;
}

/* Make Genres dropdown menu always readable */
#genreDropdownMenu {
    min-width: 100%;
    max-width: min(28rem, 92vw);
}

#genreDropdownMenu label {
    width: 100%;
}

#genreDropdownMenu span {
    white-space: normal;
}

:root {
    --filterW: 11.5rem;
    /* change once to resize all filters/buttons */
}

/* Desktop: keep everything same width + prevent the Genres dropdown from expanding */
@media (min-width: 768px) {

    #mediaType,
    #yearFilter,
    #resultSort,
    #genreDropdownBtn,
    #btnSearch,
    #btnResetFilters,
    #btnTrending {
        width: var(--filterW) !important;
    }

    /* Dropdown menu should match the button width (not w-full of the whole row) */
    #genreDropdownMenu {
        width: var(--filterW) !important;
        min-width: var(--filterW) !important;
        max-width: var(--filterW) !important;
    }

    /* Let the search input take remaining space without becoming tiny */
    #q {
        flex: 1 1 260px;
        min-width: 260px;
    }
}

:root {
    --ctrlW: 11.25rem;
    /* width for Type/Year/Genres/Sort + buttons */
    --searchMin: 22rem;
    /* search bar minimum width */
    --searchMax: 34rem;
    /* search bar maximum width */
}

@media (min-width: 768px) {

    /* Search input: reasonably wide, flexible, but capped */
    #q {
        width: auto !important;
        min-width: var(--searchMin) !important;
        max-width: var(--searchMax) !important;
        flex: 1 1 var(--searchMin) !important;
    }

    /* All other controls: identical width */
    #mediaType,
    #yearFilter,
    #resultSort,
    #genreDropdownBtn,
    #btnSearch,
    #btnResetFilters,
    #btnTrending {
        width: var(--ctrlW) !important;
    }

    /* Genres dropdown menu should match the Genres button */
    #genreDropdownMenu {
        width: var(--ctrlW) !important;
        min-width: var(--ctrlW) !important;
        max-width: var(--ctrlW) !important;
    }
}

:root {
    --ctrlW: 11.25rem;
    /* fixed width for all non-search controls */
    --searchMin: 24rem;
    /* search bar minimum */
}

@media (min-width: 768px) {

    /* allow the search control to shrink/grow without breaking layout */
    #q {
        min-width: var(--searchMin) !important;
        width: auto !important;
    }

    /* keep everything else consistent */
    #mediaType,
    #yearFilter,
    #resultSort,
    #genreDropdownBtn,
    #btnSearch,
    #btnResetFilters,
    #btnTrending {
        width: var(--ctrlW) !important;
    }

    /* menu width must match the button */
    #genreDropdownMenu {
        width: var(--ctrlW) !important;
        min-width: var(--ctrlW) !important;
        max-width: var(--ctrlW) !important;
    }
}

@media (min-width: 768px) {
    :root {
        --ctrlW: clamp(9rem, 11vw, 11.25rem);
        --searchMin: clamp(14rem, 22vw, 24rem);
    }

    #q {
        min-width: var(--searchMin) !important;
        flex: 1 1 auto !important;
        width: auto !important;
    }

    #mediaType,
    #yearFilter,
    #resultSort,
    #genreDropdownBtn,
    #btnSearch,
    #btnResetFilters,
    #btnTrending {
        width: var(--ctrlW) !important;
    }

    #genreDropdownMenu {
        width: var(--ctrlW) !important;
        min-width: var(--ctrlW) !important;
        max-width: var(--ctrlW) !important;
    }
}


/* 14-inch friendly: controls shrink a bit at md, one-line only at lg */
@media (min-width: 768px) {

    :root {
        /* ✅ Slightly smaller so 1366×768 fits without zoom */
        --ctrlW: clamp(8.75rem, 10.5vw, 11.25rem);
        --searchMin: clamp(14rem, 24vw, 24rem);
    }

    /* Critical for flex layouts: prevents content from forcing overflow */
    .card-body * {
        min-width: 0;
    }

    #q {
        min-width: var(--searchMin) !important;
        width: auto !important;
        flex: 1 1 auto !important;
    }

    #mediaType,
    #yearFilter,
    #resultSort,
    #genreDropdownBtn,
    #btnSearch,
    #btnResetFilters,
    #btnTrending {
        width: var(--ctrlW) !important;
    }

    #genreDropdownMenu {
        width: var(--ctrlW) !important;
        min-width: var(--ctrlW) !important;
        max-width: var(--ctrlW) !important;
    }
}

/* =========================================================
   FINAL LAYOUT FIX (full page + laptop safe)
   - Uses full viewport width/height
   - Prevents filter bar overflow on 1366×768
   ========================================================= */

/* Full-width + full-height app wrapper (your wrapper uses .max-w-5xl) */
.max-w-5xl {
    max-width: 100% !important;
    width: 100% !important;
    margin-left: 0 !important;
    margin-right: 0 !important;

    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Main should consume remaining height under header/banner */
main.grid {
    flex: 1 1 auto;
    min-height: 0;
    align-items: stretch;
}

/* Let both cards stretch and allow inner scrolling areas */
main.grid>section {
    display: flex;
    flex-direction: column;
    min-height: 0;
}

main.grid>section>.card-body {
    display: flex;
    flex-direction: column;
    flex: 1 1 auto;
    min-height: 0;
}

/* Scroll inside results/pool instead of growing the whole page */
#results {
    flex: 1 1 auto;
    min-height: 0;
    overflow: auto;
}

#pool {
    flex: 1 1 auto;
    min-height: 0;
    overflow: auto;
    max-height: none !important;
}

/* Laptop widths: allow the top filter/action bar to wrap and shrink */
@media (min-width: 768px) and (max-width: 1535px) {

    /* The top toolbar in the left card */
    main.grid>section:first-child .card-body>div.flex {
        flex-wrap: wrap !important;
    }

    /* Override fixed-width control rules that can force overflow */
    #mediaType,
    #yearFilter,
    #resultSort,
    #genreDropdownBtn,
    #btnSearch,
    #btnResetFilters,
    #btnTrending {
        width: auto !important;
        min-width: 8.5rem;
    }

    #q {
        max-width: none !important;
        min-width: 12rem !important;
        flex: 1 1 12rem !important;
    }

    #genreDropdownMenu {
        width: 100% !important;
        min-width: 100% !important;
        max-width: min(28rem, 92vw) !important;
    }
}

/* Safety: prevent accidental horizontal overflow from long flex children */
main.grid * {
    min-width: 0;
}

/* =========================================================
   OTT dropdown (matches Genre dropdown styles)
   Paste at END of styles.css
   ========================================================= */

/* Button surface matches other selects */
#ottDropdownBtn {
    border: 1px solid hsl(var(--b3)) !important;
    background-color: hsl(var(--b1)) !important;
    color: hsl(var(--bc)) !important;
    box-shadow: var(--ui-shadow-soft) !important;
}

#ottDropdownBtn:hover {
    background-color: color-mix(in oklab, hsl(var(--b2)) 35%, transparent) !important;
}

#ottDropdownBtn:focus-visible {
    outline: none !important;
    box-shadow: 0 0 0 1px hsl(var(--p)), 0 10px 24px rgba(0, 0, 0, 0.55) !important;
}

/* Menu surface matches genre dropdown menu */
#ottDropdownMenu {
    border-color: hsl(var(--b3)) !important;
    background-color: hsl(var(--b1)) !important;
    color: hsl(var(--bc)) !important;

    min-width: 100%;
    max-width: min(28rem, 92vw);
}

#ottDropdownMenu label {
    width: 100%;
}

#ottDropdownMenu span {
    white-space: normal;
}

/* Desktop: keep all filter controls same width (include OTT) */
@media (min-width: 768px) {
    #ottDropdownBtn {
        width: var(--ctrlW) !important;
    }

    /* dropdown menu should match the button width */
    #ottDropdownMenu {
        width: var(--ctrlW) !important;
        min-width: var(--ctrlW) !important;
        max-width: var(--ctrlW) !important;
    }
}

/* Laptop widths: allow wrapping + prevent overflow (include OTT) */
@media (min-width: 768px) and (max-width: 1535px) {
    #ottDropdownBtn {
        width: auto !important;
        min-width: 8.5rem;
    }

    #ottDropdownMenu {
        width: 100% !important;
        min-width: 100% !important;
        max-width: min(28rem, 92vw) !important;
    }
}

/* =========================================================
   Make dropdown selections visible (Genres + OTT)
   Paste at END of styles.css
   ========================================================= */

#genreDropdownMenu label,
#ottDropdownMenu label {
    border: 1px solid transparent;
    border-radius: 0.75rem;
    transition: filter 160ms ease, background-color 160ms ease, border-color 160ms ease, box-shadow 160ms ease;
}

/* Hover feedback (optional, but makes it feel clickable) */
#genreDropdownMenu label:hover,
#ottDropdownMenu label:hover {
    filter: brightness(1.05);
}

/* ✅ Selected state */
#genreDropdownMenu label:has(input[type="checkbox"]:checked),
#ottDropdownMenu label:has(input[type="checkbox"]:checked) {
    border-color: color-mix(in oklab, hsl(var(--p)) 55%, hsl(var(--b3)) 45%);
    background: linear-gradient(135deg,
            color-mix(in oklab, hsl(var(--p)) 45%, transparent),
            color-mix(in oklab, hsl(var(--s)) 35%, transparent));
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.35), 0 0 0 1px rgba(255, 255, 255, 0.06);
}

/* Make selected label text pop */
#genreDropdownMenu label:has(input[type="checkbox"]:checked) span,
#ottDropdownMenu label:has(input[type="checkbox"]:checked) span {
    font-weight: 700;
    color: hsl(var(--bc));
}

/* Keyboard + click focus visibility (when the checkbox gets focus) */
#genreDropdownMenu label:focus-within,
#ottDropdownMenu label:focus-within {
    outline: none;
    box-shadow: 0 0 0 2px color-mix(in oklab, hsl(var(--p)) 45%, transparent),
        0 10px 24px rgba(0, 0, 0, 0.45);
}

/* Make clicking on the option text toggle the checkbox */
#genreDropdownMenu label span,
#ottDropdownMenu label span {
    pointer-events: none;
}

#genreDropdownMenu label,
#ottDropdownMenu label {
    cursor: pointer;
}

#genreDropdownMenu label,
#ottDropdownMenu label {
    width: 100%;
    cursor: pointer;
}